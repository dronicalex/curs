/*! smooth-scroll v16.1.2 | (c) 2020 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),o=this;do{for(t=n.length;0<=--t&&n.item(t)!==o;);}while(t<0&&(o=o.parentElement));return o}),(function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e})(),(function(){for(var r=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),o=Math.max(0,16-(n-r)),a=window.setTimeout((function(){e(n+o)}),o);return r=n+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),(function(e,t){"function"==typeof define&&define.amd?define([],(function(){return t(e)})):"object"==typeof exports?module.exports=t(e):e.SmoothScroll=t(e)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(q){"use strict";var I={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0},F=function(){var n={};return Array.prototype.forEach.call(arguments,(function(e){for(var t in e){if(!e.hasOwnProperty(t))return;n[t]=e[t]}})),n},r=function(e){"#"===e.charAt(0)&&(e=e.substr(1));for(var t,n=String(e),o=n.length,a=-1,r="",i=n.charCodeAt(0);++a<o;){if(0===(t=n.charCodeAt(a)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");1<=t&&t<=31||127==t||0===a&&48<=t&&t<=57||1===a&&48<=t&&t<=57&&45===i?r+="\\"+t.toString(16)+" ":r+=128<=t||45===t||95===t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122?n.charAt(a):"\\"+n.charAt(a)}return"#"+r},L=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},x=function(e){return e?(t=e,parseInt(q.getComputedStyle(t).height,10)+e.offsetTop):0;var t},H=function(e,t,n,o){if(t.emitEvents&&"function"==typeof q.CustomEvent){var a=new CustomEvent(e,{bubbles:!0,detail:{anchor:n,toggle:o}});document.dispatchEvent(a)}};return function(o,e){var A,a,O,C,M={};M.cancelScroll=function(e){cancelAnimationFrame(C),C=null,e||H("scrollCancel",A)},M.animateScroll=function(i,c,e){M.cancelScroll();var s=F(A||I,e||{}),u="[object Number]"===Object.prototype.toString.call(i),t=u||!i.tagName?null:i;if(u||t){var l=q.pageYOffset;s.header&&!O&&(O=document.querySelector(s.header));var n,o,a,m,r,d,f,h,p=x(O),g=u?i:(function(e,t,n,o){var a=0;if(e.offsetParent)for(;a+=e.offsetTop,e=e.offsetParent;);return a=Math.max(a-t-n,0),o&&(a=Math.min(a,L()-q.innerHeight)),a})(t,p,parseInt("function"==typeof s.offset?s.offset(i,c):s.offset,10),s.clip),y=g-l,v=L(),w=0,S=(n=y,a=(o=s).speedAsDuration?o.speed:Math.abs(n/1e3*o.speed),o.durationMax&&a>o.durationMax?o.durationMax:o.durationMin&&a<o.durationMin?o.durationMin:parseInt(a,10)),E=function(e,t){var n,o,a,r=q.pageYOffset;if(e==t||r==t||(l<t&&q.innerHeight+r)>=v)return M.cancelScroll(!0),o=t,a=u,0===(n=i)&&document.body.focus(),a||(n.focus(),document.activeElement!==n&&(n.setAttribute("tabindex","-1"),n.focus(),n.style.outline="none"),q.scrollTo(0,o)),H("scrollStop",s,i,c),!(C=m=null)},b=function(e){var t,n,o;m||(m=e),w+=e-m,d=l+y*(n=r=1<(r=0===S?0:w/S)?1:r,"easeInQuad"===(t=s).easing&&(o=n*n),"easeOutQuad"===t.easing&&(o=n*(2-n)),"easeInOutQuad"===t.easing&&(o=n<.5?2*n*n:(4-2*n)*n-1),"easeInCubic"===t.easing&&(o=n*n*n),"easeOutCubic"===t.easing&&(o=--n*n*n+1),"easeInOutCubic"===t.easing&&(o=n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1),"easeInQuart"===t.easing&&(o=n*n*n*n),"easeOutQuart"===t.easing&&(o=1- --n*n*n*n),"easeInOutQuart"===t.easing&&(o=n<.5?8*n*n*n*n:1-8*--n*n*n*n),"easeInQuint"===t.easing&&(o=n*n*n*n*n),"easeOutQuint"===t.easing&&(o=1+--n*n*n*n*n),"easeInOutQuint"===t.easing&&(o=n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n),t.customEasing&&(o=t.customEasing(n)),o||n),q.scrollTo(0,Math.floor(d)),E(d,g)||(C=q.requestAnimationFrame(b),m=e)};0===q.pageYOffset&&q.scrollTo(0,0),f=i,h=s,u||history.pushState&&h.updateURL&&history.pushState({smoothScroll:JSON.stringify(h),anchor:f.id},document.title,f===document.documentElement?"#top":"#"+f.id),"matchMedia"in q&&q.matchMedia("(prefers-reduced-motion)").matches?q.scrollTo(0,Math.floor(g)):(H("scrollStart",s,i,c),M.cancelScroll(!0),q.requestAnimationFrame(b))}};var t=function(e){if(!e.defaultPrevented&&!(0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey)&&"closest"in e.target&&(a=e.target.closest(o))&&"a"===a.tagName.toLowerCase()&&!e.target.closest(A.ignore)&&a.hostname===q.location.hostname&&a.pathname===q.location.pathname&&/#/.test(a.href)){var t,n;try{t=r(decodeURIComponent(a.hash))}catch(e){t=r(a.hash)}if("#"===t){if(!A.topOnEmptyHash)return;n=document.documentElement}else n=document.querySelector(t);(n=n||"#top"!==t?n:document.documentElement)&&(e.preventDefault(),(function(e){if(history.replaceState&&e.updateURL&&!history.state){var t=q.location.hash;t=t||"",history.replaceState({smoothScroll:JSON.stringify(e),anchor:t||q.pageYOffset},document.title,t||q.location.href)}})(A),M.animateScroll(n,a))}},n=function(e){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(A)){var t=history.state.anchor;"string"==typeof t&&t&&!(t=document.querySelector(r(history.state.anchor)))||M.animateScroll(t,null,{updateURL:!1})}};M.destroy=function(){A&&(document.removeEventListener("click",t,!1),q.removeEventListener("popstate",n,!1),M.cancelScroll(),C=O=a=A=null)};return (function(){if(!("querySelector"in document&&"addEventListener"in q&&"requestAnimationFrame"in q&&"closest"in q.Element.prototype))throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";M.destroy(),A=F(I,e||{}),O=A.header?document.querySelector(A.header):null,document.addEventListener("click",t,!1),A.updateURL&&A.popstate&&q.addEventListener("popstate",n,!1)})(),M}}));;

// console.log(document.querySelectorAll('.main-header__icons'))

// let burgerMenu = document.querySelector('.header__burger-menu')
// let burger = document.querySelector('.header__burger')

// burger.addEventListener('click', function () {
// 	burgerMenu.classList.toggle('_active')
// })

let headerMen = document.querySelector('._header__ul');
if (headerMen) {


	window.addEventListener('click', function (e) {
		e = e.target
		if (e.classList.contains('_rrr')) {
			document.querySelector('._header__ul').classList.add('_active')
		} else {
			document.querySelector('._header__ul').classList.remove('_active')
		}
	})
}

let human = document.getElementsByClassName('human');
if (human.length > 0) {
	console.log()
	let screenImg = document.getElementsByClassName('_animates');;
	let humanDooble = document.querySelector('.human_dooble');
	var ua = window.navigator.userAgent;
	var msie = ua.indexOf("MSIE ");
	var isMobile = { Android: function () { return navigator.userAgent.match(/Android/i); }, BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i); }, iOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i); }, Opera: function () { return navigator.userAgent.match(/Opera Mini/i); }, Windows: function () { return navigator.userAgent.match(/IEMobile/i); }, any: function () { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()); } };
	function isIE() {
		ua = navigator.userAgent;
		var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
		return is_ie;
	}


	let footerBg = document.querySelectorAll('.footer-screen__bg');
	let footerBlock = document.querySelector('.ton')

	if (window.innerWidth > 500) {

		footerBg.forEach((item) => {
			item.classList.add('human')
			// item.classList.add('screen__img')
			item.classList.add('human_dooble')

		});
		footerBlock.classList.add('_animates')
		let footerBgImg = document.querySelectorAll('.footer-screen__bg img');


		let forHuman = 25;
		let speed = 0.6;
		let positionX = 0;
		let positionY = 0;
		let coordXProcent = 0;
		let coordYProcent = 0;



		function paralaxHuman() {
			const distX = coordXProcent - positionX;
			const distY = coordYProcent - positionY;
			positionX = positionX + (distX * speed);
			positionY = positionY + (distY * speed);

			for (let index = 0; index < human.length; index++) {
				const element = human[index];
				element.style.transform = "translate(" + (positionX / (forHuman * 2)) + "%, " + (positionY / (forHuman * 5)) + "%) ";
				forHuman -= 2
				speed += 0.5;


			}
			forHuman = 10;
			speed = 0.3;
			// human.forEach((item) => {
			// item.style.transform = "translate(" + (positionX / forHuman) + "%, " + (positionY / forHuman) + "%)";

			// });
			// human.style.transform = "translate(" + (positionX / forHuman) + "%, " + (positionY / forHuman) + "%)";


			requestAnimationFrame(paralaxHuman);
		}

		paralaxHuman();
		for (let index = 0; index < screenImg.length; index++) {
			const element = screenImg[index];

			element.addEventListener('mousemove', function (e) {
				const screenImgWidth = element.offsetWidth;
				const screenImgHeight = element.offsetHeight;
				const coordX = e.pageX - screenImgWidth / 2;
				const coordY = e.pageY - screenImgHeight / 2;
				coordXProcent = coordX / screenImgWidth * 100;
				coordYProcent = coordY / screenImgHeight * 100;
			})

		}
	}
}
let programmItem = document.querySelectorAll('.programm__item');
if (programmItem) {
	let h = []
	let programWp = document.querySelectorAll('.programm__wp');
	let programmBef = document.querySelector('.programm__bef');
	for (let index = 0; index < programmItem.length; index++) {
		const element = programmItem[index];
		h.push(programWp[index].clientHeight)
		console.log(h)
		element.classList.remove('_active')
		programWp[index].style.height = `${70}px`
		element.addEventListener('click', function () {
			element.classList.toggle('_active')

			if (element.classList.contains('_active')) {
				console.log('1')
				programWp[index].style.height = `${h[index]}px`
				setTimeout(() => {
					programWp[index].style.height = `auto`
				}, 400);
			}
			else {
				programWp[index].style.height = `${h[index]}px`
				setTimeout(() => {
					programWp[index].style.height = `${70}px`
				}, 100);

			}

			for (let index = 0; index < programmItem.length; index++) {
				const element = programmItem[index];
				if (element.classList.contains('_active')) {
					programmBef.classList.add('_active')
					return
				} else {
					programmBef.classList.remove('_active')
				}
			}
		})
	}
}



let reviewItem = document.querySelectorAll('.review__item');
if (reviewItem.length > 0) {
	let popupPopup = document.querySelector('.popup_popup');


	for (let index = 0; index < reviewItem.length; index++) {
		const element = reviewItem[index];


		element.addEventListener('click', function () {

			let img = element.firstElementChild.firstElementChild.firstElementChild.getAttribute('src')
			document.querySelector('.popup__img').firstElementChild.src = img
			let name = element.firstElementChild.children[1].innerText
			document.querySelector('.popup__name').innerHTML = name
			let text = element.children[1].innerText
			document.querySelector('.popup__text').innerHTML = text


			popupPopup.classList.add('_active')

		})
	}


	let cl = document.querySelector('._cl');
	cl.addEventListener('click', function () {
		document.querySelector('.close__meta').classList.add('_active')
	})

	let closeLeft = document.querySelector('.close__left');
	closeLeft.addEventListener('mouseover', function () {
		document.querySelector('.close__two').classList.add('_active')
		console.log('_vfrjk')
	})
}


let quest = document.querySelectorAll('._quest');
if (quest) {


	let resp = document.querySelectorAll('._resp');
	// let itt = document.querySelectorAll('.faq__item');
	let hh = [];
	for (let index = 0; index < quest.length; index++) {
		const element = quest[index];
		hh.push(resp[index].clientHeight)
		resp[index].style.height = '0px'
		element.addEventListener('click', function () {
			element.classList.toggle('_active')
			if (element.classList.contains('_active')) {
				// itt[index].classList.add('_active')
				resp[index].classList.add('_active')
				resp[index].style.height = `${hh[index]}px`
				setTimeout(() => {
					resp[index].style.height = `auto`
				}, 300);


			} else {
				resp[index].style.height = `${hh[index]}px`
				resp[index].classList.remove('_active')
				setTimeout(() => {
					resp[index].style.height = `0px`
				}, 100);

				// itt[index].classList.remove('_active')
			}

		})
	}
}


let block1 = document.querySelector('._awp');
if (block1) {


	let block2 = document.querySelector('._bwp');

	document.addEventListener('scroll', function () {
		px = scrollY
		console.log(block1.getBoundingClientRect().bottom)
		if (block1.getBoundingClientRect().bottom <= 1) {
			block1.classList.add('_y')
			block2.classList.add('_y')
			document.querySelector('.close__container').classList.add('_y')
		} else {
			block1.classList.remove('_y')
			block2.classList.remove('_y')
		}
	})
}



let val = document.querySelectorAll('._val');
let k = document.querySelector('.k');
let gg = document.querySelectorAll('._gg');
if (val.length > 0) {

	if (window.innerWidth < 1000) {
		for (let index = 0; index < gg.length; index++) {
			const element = gg[index];
			element.addEventListener('click', function (e) {
				e.preventDefault()
				document.querySelector('.dop__r').classList.add('qqq')
			})

			k.addEventListener('click', function (e) {
				e.preventDefault()
				for (let index = 0; index < val.length; index++) {
					const element = val[index];
					if (element.value.length == 0) {
						element.classList.add('_err')
						element.parentNode.classList.add('_err')
					} else {
						element.classList.remove('_err')
						element.parentNode.classList.remove('_err')
					}
				}
			})
		}

	} else {
		for (let index = 0; index < gg.length; index++) {
			const element = gg[index];
			element.addEventListener('click', function (e) {
				e.preventDefault()
				for (let index = 0; index < val.length; index++) {
					const element = val[index];
					if (element.value.length == 0) {
						element.classList.add('_err')
						element.parentNode.classList.add('_err')
					} else {
						element.classList.remove('_err')
						element.parentNode.classList.remove('_err')
					}
				}
			})
		}


		for (let index = 0; index < val.length; index++) {
			const element = val[index];
			element.addEventListener('input', function () {
				element.classList.remove('_err')
				element.parentNode.classList.remove('_err')
			})
		}
	}

}

let kk = document.querySelector('.kk');
if (kk) {
	if (window.innerWidth < 1000) {
		kk.addEventListener('click', function (e) {
			e.preventDefault()
			document.querySelector('.dop__r').classList.remove('qqq')
		})
	}
}